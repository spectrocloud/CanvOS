menuentry "Palette eXtended Kubernetes Edge Reset" --id statereset {
	if [ test -s /cOS/recovery.squashfs ]; then
		set img=/cOS/recovery.squashfs
		set recoverylabel=COS_RECOVERY
	else
		set img=/cOS/recovery.img
	fi
	search.fs_label COS_RECOVERY root
	set label=COS_SYSTEM
	loopback loop0 /$img
	set root=($root)
	source (loop0)/etc/cos/bootargs.cfg
	linux (loop0)$kernel $kernelcmd ${extra_cmdline} ${extra_recovery_cmdline} kairos.reset
	initrd (loop0)$initramfs
}

menuentry "Palette eXtended Kubernetes Edge Registration" --id registration {
	search --no-floppy --label --set=root COS_STATE
	set img=/cOS/active.img
	set label=COS_ACTIVE
	loopback loop0 /$img
	set root=($root)
	source (loop0)/etc/cos/bootargs.cfg
	linux (loop0)$kernel $kernelcmd ${extra_cmdline} ${extra_active_cmdline} stylus.registration
	initrd (loop0)$initramfs
}